#!/bin/bash
cd `dirname $0`;cd ../
p=`pwd`

export PYTHONPATH=$(pwd):$PYTHONPATH

#python3 database/database/import_to_db.py
#QUERY="юрист"
QUERY=$1
if [ -z "$1" ]; then
echo "USAGE: $0 [search str]"
exit
fi
#python3 -c "from backend.question_analyzer import question_analyzer;question_analyzer('$QUERY')" $p/backend/question_analyzer.py
#python3 $p/backend/question_analyzer.py $QUERY
#python3 ./bin/question.py $QUERY

python3 -c 'import sys
import asyncio
from backend.question_analyzer import analyze_user_query,full_pipeline,vector_search
print("p=" + sys.argv[1])
result=asyncio.run(vector_search(sys.argv[1]))
print(result)
#asyncio.run(analyze_user_query(sys.argv[1]))
#results = asyncio.run(full_pipeline(sys.argv[1]))
print("\n--- Результаты ---")
for r in results:
    print(f"{r.created_at} — {r.author}: {r.content}")
' $QUERY

