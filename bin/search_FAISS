#!/bin/bash
cd "$(dirname "$0")/../"

source ./bin/begin.sh

#python3 utils/search_LLM_run.py $1 #exit
python3 -c '
import asyncio
import sys
from backend.search_FAISS import full_pipeline, init_resources

from utils.logger import setup_logger 
logger = setup_logger("CLI")

question_default="Валера"

import logging
import logging.config
import os

async def main():
    init_resources()
    
    if len(sys.argv) > 1:
        q=sys.argv[1]
    else:
        q=question_default
    res=await full_pipeline(q)
    #print(res)
    logger.info(str(res))

asyncio.run(main())
' $1
